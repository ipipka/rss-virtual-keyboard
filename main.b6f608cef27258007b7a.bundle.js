(()=>{"use strict";const e=()=>{const e=document.createElement("div");return e.classList.add("keyboard__row"),e},t=({code:e,ru:t,ruShift:f,ruCapsEffect:a,en:c,enShift:r,enCapsEffect:s,className:n,keyModifier:i})=>{let u=`<span class="char char--ru">${t}</span>`;u+=`<span class="char char--ru-shift">${f}</span>`,u+=a?`<span class="char char--ru-caps">${f}</span>`:`<span class="char char--ru-caps">${t}</span>`,u+=a?`<span class="char char--ru-caps-shift">${t}</span>`:`<span class="char char--ru-caps-shift">${f}</span>`,u+=`<span class="char char--en">${c}</span>`,u+=`<span class="char char--en-shift">${r}</span>`,u+=s?`<span class="char char--en-caps">${r}</span>`:`<span class="char char--en-caps">${c}</span>`,u+=s?`<span class="char char--en-caps-shift">${c}</span>`:`<span class="char char--en-caps-shift">${r}</span>`;const o=document.createElement("div");return o.classList.add("key"),n&&o.classList.add(n),o.dataset.modifier=i||"false",o.dataset.code=e,o.innerHTML=u,i?(o.addEventListener("mousedown",(()=>{document.dispatchEvent(new KeyboardEvent("keydown",{code:e}))})),o.addEventListener("mouseup",(()=>{document.dispatchEvent(new KeyboardEvent("keyup",{code:e}))}))):o.addEventListener("click",(()=>{o.classList.add("key--click"),document.dispatchEvent(new KeyboardEvent("keydown",{code:e})),document.dispatchEvent(new KeyboardEvent("keyup",{code:e})),setTimeout((()=>{o.classList.remove("key--click")}),150)})),o},f={rows:[14,14,13,12,9],lang:"en",caps:"false",shift:"false",keys:[{code:"Backquote",ru:"ё",ruShift:"Ё",ruCapsEffect:!0,en:"`",enShift:"~",enCapsEffect:!1},{code:"Digit1",ru:"1",ruShift:"!",ruCapsEffect:!1,en:"1",enShift:"!",enCapsEffect:!1},{code:"Digit2",ru:"2",ruShift:'"',ruCapsEffect:!1,en:"2",enShift:"@",enCapsEffect:!1},{code:"Digit3",ru:"3",ruShift:"№",ruCapsEffect:!1,en:"3",enShift:"#",enCapsEffect:!1},{code:"Digit4",ru:"4",ruShift:";",ruCapsEffect:!1,en:"4",enShift:"$",enCapsEffect:!1},{code:"Digit5",ru:"5",ruShift:"%",ruCapsEffect:!1,en:"5",enShift:"%",enCapsEffect:!1},{code:"Digit6",ru:"6",ruShift:":",ruCapsEffect:!1,en:"6",enShift:"^",enCapsEffect:!1},{code:"Digit7",ru:"7",ruShift:"?",ruCapsEffect:!1,en:"7",enShift:"&",enCapsEffect:!1},{code:"Digit8",ru:"8",ruShift:"*",ruCapsEffect:!1,en:"8",enShift:"*",enCapsEffect:!1},{code:"Digit9",ru:"9",ruShift:"(",ruCapsEffect:!1,en:"9",enShift:"(",enCapsEffect:!1},{code:"Digit0",ru:"0",ruShift:")",ruCapsEffect:!1,en:"0",enShift:")",enCapsEffect:!1},{code:"Minus",ru:"-",ruShift:"_",ruCapsEffect:!1,en:"-",enShift:"_",enCapsEffect:!1},{code:"Equal",ru:"=",ruShift:"+",ruCapsEffect:!1,en:"=",enShift:"+",enCapsEffect:!1},{code:"Backspace",ru:"⇦",ruShift:"⇦",ruCapsEffect:!1,en:"⇦",enShift:"⇦",enCapsEffect:!1,className:"key--backspace",keyModifier:!0},{code:"Tab",ru:"tab",ruShift:"tab",ruCapsEffect:!1,en:"tab",enShift:"tab",enCapsEffect:!1,className:"key--tab",keyModifier:!0},{code:"KeyQ",ru:"й",ruShift:"Й",ruCapsEffect:!0,en:"q",enShift:"Q",enCapsEffect:!0},{code:"KeyW",ru:"ц",ruShift:"Ц",ruCapsEffect:!0,en:"w",enShift:"W",enCapsEffect:!0},{code:"KeyE",ru:"у",ruShift:"У",ruCapsEffect:!0,en:"e",enShift:"E",enCapsEffect:!0},{code:"KeyR",ru:"к",ruShift:"К",ruCapsEffect:!0,en:"r",enShift:"R",enCapsEffect:!0},{code:"KeyT",ru:"е",ruShift:"Е",ruCapsEffect:!0,en:"t",enShift:"T",enCapsEffect:!0},{code:"KeyY",ru:"н",ruShift:"Н",ruCapsEffect:!0,en:"y",enShift:"Y",enCapsEffect:!0},{code:"KeyU",ru:"г",ruShift:"Г",ruCapsEffect:!0,en:"u",enShift:"U",enCapsEffect:!0},{code:"KeyI",ru:"ш",ruShift:"Ш",ruCapsEffect:!0,en:"i",enShift:"I",enCapsEffect:!0},{code:"KeyO",ru:"щ",ruShift:"Щ",ruCapsEffect:!0,en:"o",enShift:"O",enCapsEffect:!0},{code:"KeyP",ru:"з",ruShift:"З",ruCapsEffect:!0,en:"p",enShift:"P",enCapsEffect:!0},{code:"BracketLeft",ru:"х",ruShift:"Х",ruCapsEffect:!0,en:"[",enShift:"{",enCapsEffect:!1},{code:"BracketRight",ru:"ъ",ruShift:"Ъ",ruCapsEffect:!0,en:"]",enShift:"}",enCapsEffect:!1},{code:"Backslash",ru:"\\",ruShift:"/",ruCapsEffect:!1,en:"\\",enShift:"|",enCapsEffect:!1},{code:"CapsLock",ru:"caps lock",ruShift:"caps lock",ruCapsEffect:!1,en:"caps lock",enShift:"caps lock",enCapsEffect:!1,className:"key--caps-lock",keyModifier:!0},{code:"KeyA",ru:"ф",ruShift:"Ф",ruCapsEffect:!0,en:"a",enShift:"A",enCapsEffect:!0},{code:"KeyS",ru:"ы",ruShift:"Ы",ruCapsEffect:!0,en:"s",enShift:"S",enCapsEffect:!0},{code:"KeyD",ru:"в",ruShift:"В",ruCapsEffect:!0,en:"d",enShift:"D",enCapsEffect:!0},{code:"KeyF",ru:"а",ruShift:"А",ruCapsEffect:!0,en:"f",enShift:"F",enCapsEffect:!0},{code:"KeyG",ru:"п",ruShift:"П",ruCapsEffect:!0,en:"g",enShift:"G",enCapsEffect:!0},{code:"KeyH",ru:"р",ruShift:"Р",ruCapsEffect:!0,en:"h",enShift:"H",enCapsEffect:!0},{code:"KeyJ",ru:"о",ruShift:"О",ruCapsEffect:!0,en:"j",enShift:"J",enCapsEffect:!0},{code:"KeyK",ru:"л",ruShift:"Л",ruCapsEffect:!0,en:"k",enShift:"K",enCapsEffect:!0},{code:"KeyL",ru:"д",ruShift:"Д",ruCapsEffect:!0,en:"l",enShift:"L",enCapsEffect:!0},{code:"Semicolon",ru:"ж",ruShift:"Ж",ruCapsEffect:!0,en:";",enShift:":",enCapsEffect:!1},{code:"Quote",ru:"э",ruShift:"Э",ruCapsEffect:!0,en:"'",enShift:'"',enCapsEffect:!1},{code:"Enter",ru:"enter",ruShift:"enter",ruCapsEffect:!1,en:"enter",enShift:"enter",enCapsEffect:!1,className:"key--enter",keyModifier:!0},{code:"ShiftLeft",ru:"shift",ruShift:"shift",ruCapsEffect:!1,en:"shift",enShift:"shift",enCapsEffect:!1,className:"key--shift-left",keyModifier:!0},{code:"KeyZ",ru:"я",ruShift:"Я",ruCapsEffect:!0,en:"z",enShift:"Z",enCapsEffect:!0},{code:"KeyX",ru:"ч",ruShift:"Ч",ruCapsEffect:!0,en:"x",enShift:"X",enCapsEffect:!0},{code:"KeyC",ru:"с",ruShift:"С",ruCapsEffect:!0,en:"c",enShift:"C",enCapsEffect:!0},{code:"KeyV",ru:"м",ruShift:"М",ruCapsEffect:!0,en:"v",enShift:"V",enCapsEffect:!0},{code:"KeyB",ru:"и",ruShift:"И",ruCapsEffect:!0,en:"b",enShift:"B",enCapsEffect:!0},{code:"KeyN",ru:"т",ruShift:"Т",ruCapsEffect:!0,en:"n",enShift:"N",enCapsEffect:!0},{code:"KeyM",ru:"ь",ruShift:"Ь",ruCapsEffect:!0,en:"m",enShift:"M",enCapsEffect:!0},{code:"Comma",ru:"б",ruShift:"Б",ruCapsEffect:!0,en:",",enShift:"<",enCapsEffect:!1},{code:"Period",ru:"ю",ruShift:"Ю",ruCapsEffect:!0,en:".",enShift:">",enCapsEffect:!1},{code:"Slash",ru:".",ruShift:",",ruCapsEffect:!1,en:"/",enShift:"?",enCapsEffect:!1},{code:"ShiftRight",ru:"shift",ruShift:"shift",ruCapsEffect:!1,en:"shift",enShift:"shift",enCapsEffect:!1,className:"key--shift-right",keyModifier:!0},{code:"ControlLeft",ru:"ctrl",ruShift:"ctrl",ruCapsEffect:!1,en:"ctrl",enShift:"ctrl",enCapsEffect:!1,className:"key--ctrl-left",keyModifier:!0},{code:"AltLeft",ru:"alt",ruShift:"alt",ruCapsEffect:!1,en:"alt",enShift:"alt",enCapsEffect:!1,className:"key--alt-left",keyModifier:!0},{code:"Space",ru:" ",ruShift:" ",ruCapsEffect:!1,en:" ",enShift:" ",enCapsEffect:!1,className:"key--space",keyModifier:!0},{code:"AltRight",ru:"alt",ruShift:"alt",ruCapsEffect:!1,en:"alt",enShift:"alt",enCapsEffect:!1,className:"key--alt-right",keyModifier:!0},{code:"ControlRight",ru:"ctrl",ruShift:"ctrl",ruCapsEffect:!1,en:"ctrl",enShift:"ctrl",enCapsEffect:!1,className:"key--ctrl-right",keyModifier:!0},{code:"ArrowLeft",ru:"←",ruShift:"←",ruCapsEffect:!1,en:"←",enShift:"←",enCapsEffect:!1,className:"key--arrow-left",keyModifier:!0},{code:"ArrowDown",ru:"↓",ruShift:"↓",ruCapsEffect:!1,en:"↓",enShift:"↓",enCapsEffect:!1,className:"key--arrow-down",keyModifier:!0},{code:"ArrowRight",ru:"→",ruShift:"→",ruCapsEffect:!1,en:"→",enShift:"→",enCapsEffect:!1,className:"key--arrow-right",keyModifier:!0},{code:"ArrowUp",ru:"↑",ruShift:"↑",ruCapsEffect:!1,en:"↑",enShift:"↑",enCapsEffect:!1,className:"key--arrow-up",keyModifier:!0}]},a=(()=>{const e=document.createElement("div"),t=localStorage.getItem("keyboardLang")||f.lang;return e.classList.add("keyboard"),e.dataset.lang=t,e.dataset.caps=String(f.caps),e.dataset.shift=String(f.shift),e})();let c=0;for(let r=0;r<f.rows.length;r+=1){const s=e();for(let e=0;e<f.rows[r];e+=1)s.append(t(f.keys[c+e]));a.append(s),c+=f.rows[r]}const r=a,s=(()=>{const e=document.createElement("div");return e.classList.add("about"),e.innerHTML+='<div class="about__content">\n      <div class="about__system">Клавиатура создана в операционной системе Windows</div>\n      <div class="about__lang">Комбинация для переключения языка Shift + Alt</div>\n    </div>',e})(),n=(()=>{const e=document.createElement("div");return e.classList.add("text"),e.innerHTML='<textarea class="text__field" readonly></textarea>',e})(),i=()=>{const e=document.querySelector(".keyboard"),t=document.querySelector(".key--shift-left.key--active"),f=document.querySelector(".key--shift-right.key--active");e.dataset.shift=t||f?"true":"false"};document.body.append(n),document.body.append(r),document.body.append(s),document.addEventListener("keydown",(e=>{const t=document.querySelector(`.key[data-code="${e.code}"]`);t&&(t.classList.add("key--active"),"CapsLock"===e.code&&(()=>{const e=document.querySelector(".keyboard"),t=document.querySelector(".key--caps-lock"),{caps:f}=e.dataset;"false"===f?(e.dataset.caps="true",t.classList.add("key--caps-lock-active")):(e.dataset.caps="false",t.classList.remove("key--caps-lock-active"))})(),["ShiftLeft","ShiftRight"].includes(e.code)&&!e.repeat&&i(),["ShiftLeft","ShiftRight","AltLeft","AltRight"].includes(e.code)&&!e.repeat&&(()=>{const e=document.querySelector(".keyboard"),t=document.querySelector(".key--shift-left.key--active"),f=document.querySelector(".key--shift-right.key--active"),a=document.querySelector(".key--alt-left.key--active"),c=document.querySelector(".key--alt-right.key--active");if((t||f)&&(a||c)){const{lang:t}=e.dataset;"en"===t?(e.dataset.lang="ru",localStorage.setItem("keyboardLang","ru")):(e.dataset.lang="en",localStorage.setItem("keyboardLang","en"))}})(),(e=>{const{lang:t,caps:f,shift:a}=document.querySelector(".keyboard").dataset,c=document.querySelector(".text__field");let r=c.value;if("false"===e.dataset.modifier){let s;return s="true"===f&&"true"===a?e.querySelector(`.char--${t}-caps-shift`).innerText:"true"===f?e.querySelector(`.char--${t}-caps`).innerText:"true"===a?e.querySelector(`.char--${t}-shift`).innerText:e.querySelector(`.char--${t}`).innerText,r+=s,c.value=r,!0}switch(e.dataset.code){case"Backspace":r=r.slice(0,-1);break;case"Tab":r+="\t";break;case"Enter":r+="\n";break;case"Space":r+=" ";break;case"ArrowLeft":r+="←";break;case"ArrowDown":r+="↓";break;case"ArrowRight":r+="→";break;case"ArrowUp":r+="↑"}c.value=r})(t),e.preventDefault())})),document.addEventListener("keyup",(e=>{const t=document.querySelector(`.key[data-code="${e.code}"]`);t&&(t.classList.remove("key--active"),["ShiftLeft","ShiftRight"].includes(e.code)&&!e.repeat&&i())}))})();